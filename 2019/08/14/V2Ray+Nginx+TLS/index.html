<!DOCTYPE html><html><head><meta name="description" content="web 前端开发"/><meta name="author" content="Fantasy"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta http-equiv="XUA_Compatible" content="IE=edge"/><meta name="sw" content="true"/><meta name="ga" content="UA-101492756-1"/><meta name="ba" content="044e5dc9f3bc0a3b3042d15a4bbd8cae"/><link rel="icon" href="/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="stylesheet" href="https://unpkg.com/firement@0.0.5/dist/style.css"/><link rel="stylesheet" href="/css/layout.css"/><title>幻想❤乡 - V2Ray+Nginx+TLS</title><meta name="generator" content="Hexo 5.0.0"></head><body><nav class="simple-layout-nav"><div class="simple-navbar"><div class="avatar-box"><a class="avatar-img" href="/"><img src="/imgs/avatar.jpg" alt="" srcset=""/></a><a class="info" href="/"><h3 class="author">Fantasy</h3><small class="subtitle">累了，就来这里歇歇</small></a></div><div class="menu"><span class="home"><a href="/"><i class="fa fa-home"></i>主页</a></span><span class="archives"><a href="/archives"><i class="fa fa-archive"></i>归档</a></span><span class="tags"><a href="/tags"><i class="fa fa-tag"></i>标签</a></span></div><div class="links"><span class="item"><a href="https://github.com//0x-jerry" target="_blank" rel="noopener"><i class="fa fa-github"></i><span>Github</span></a></span><span class="item"><a href="mailto:x.li.gem@gmail.com" target="_blank" rel="noopener"><i class="fa fa-envelope"></i><span>Email</span></a></span></div></div></nav><div class="simple-layout-content"><div class="simple-post"><h1 class="title">V2Ray+Nginx+TLS</h1><p class="post-meta"><span class="meta date">2019-08-14</span><span class="meta license"><a alt="CC BY-NC 4.0" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh" target="_blank">CC BY-NC 4.0</a></span></p><div class="markdown-content" id="post-content"><p><strong>这是一篇技术性文章，读者需要掌握基础的 Linux 基础，关于安装等一些简单的操作不做详细介绍</strong></p>
<p>这是一个比较复杂的配置，但是如果拆分开来，也就都一些比较简单的配置堆在一起而已。拆分如下：</p>
<ol>
<li>申请域名</li>
<li>DNS 配置</li>
<li>Nginx Https 配置</li>
<li>V2Ray 配合 TLS 配置</li>
</ol>
<p>服务器，博主用的 Debian 10，其它类型服务器大同小异</p>
<a id="more"></a>
<h2 id="域名申请">域名申请</h2>
<p>请自行 Google，不做讲解，假设申请的域名是 <code>test.v2ray.cn</code></p>
<h2 id="DNS-配置">DNS 配置</h2>
<p>这里用 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/">Cloudflare</a> 的免费 DNS 解析服务，登录上去，添加域名</p>
<p>然后在 DNS 里面配置服务器地址</p>
<p><strong>这里注意一下</strong> Crypto 里面的配置，由于 Cloudflare 自带 SSL 服务，默认会选择 <code>Flexible</code> 方案，这可能会 <a target="_blank" rel="noopener" href="https://support.cloudflare.com/hc/en-us/articles/115000219871">导致无限重定向的问题</a>。所以这里需要改成 <code>Full(strict)</code> 方案</p>
<p>然后在对应的域名服务商那里配上 Cloudflare 的域名服务器(nameservers)</p>
<p>到此 DNS 就配置完了</p>
<h2 id="Nginx-Https-配置">Nginx Https 配置</h2>
<p>DNS 配置完了，当然还需要配置 Https 才行</p>
<p>第一步当然是 <a target="_blank" rel="noopener" href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/">安装 Nginx</a></p>
<p>然后是安装 TLS 证书，这里使用 <a target="_blank" rel="noopener" href="https://certbot.eff.org/lets-encrypt/debianother-nginx">Certbot</a> 傻瓜式一键安装，安装完之后，应该就可以用 Https 访问申请的域名了</p>
<h2 id="V2Ray-配合-Nginx">V2Ray 配合 Nginx</h2>
<p>这里直接参考 <a target="_blank" rel="noopener" href="https://guide.v2fly.org/advanced/wss_and_web.html#%E9%85%8D%E7%BD%AE">V2Ray 白话文</a></p>
</div><hr class="post-end"/><div class="post-footer"><div class="post-license">版权声明：本文使用 <a alt="CC BY-NC 4.0" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh" target="_blank">CC BY-NC 4.0</a> 协议</div><div class="partial-simple-tags"><ul><li><a href="/tags/Nginx/"><i class="fa fa-tag"></i>Nginx</a></li><li><a href="/tags/V2Ray/"><i class="fa fa-tag"></i>V2Ray</a></li><li><a href="/tags/TLS/"><i class="fa fa-tag"></i>TLS</a></li></ul></div></div><div id="post-comment"></div></div></div><div id="post-nav"></div><div class="simple-footer"><p> Powered by
  <a class="footer-link" href="https://github.com//0x-jerry/hexo-simple-template" target="_blank" rel="noopener">Simple</a>
  and
  <a class="footer-link" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>
  , Made By
  <a class="footer-link" href="https://github.com//0x-jerry" target="_blank" rel="noopener">@Fantasy</a>
</p>
</div><script src="/js/index.js"></script></body></html>